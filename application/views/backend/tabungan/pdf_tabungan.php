<?php $pdf=new MC_Table('P','mm','A4');$pdf->AddPage();$pdf->SetMargins(30,12,30);$file='tabungan_data.pdf';$pdf->Ln($tinggi);$pdf->setFont('Arial',"","10");$pdf->SetTextColor(0,0,0);foreach($tabungan as $row){$pdf->Cell(1);$pdf->SetWidths(array(10,25,41,23,23,23));$pdf->SetAligns(array('R','L','L','R','R','R'));$this->db->select_sum('jumlah_nabung');$where=['id_user'=>$row->id_user,'waktu <='=>$row->waktu];$this->db->where($where);$msk=$this->db->get('tb_tabungan')->row();if(empty($msk->jumlah_nabung)){$kredit=0;}else{$kredit=$msk->jumlah_nabung;}$this->db->select_sum('jumlah_ambil');$where=['id_user'=>$row->id_user,'waktu <='=>$row->waktu];$this->db->where($where);$klr=$this->db->get('tb_tabungan')->row();if(empty($klr->jumlah_ambil)){$debet=0;}else{$debet=$klr->jumlah_ambil;}$saldo=$kredit-$debet;if($row->kode=="1"){$pdf->Row_noborder(array(array($urut."."),array(substr($row->waktu,0,10)),array("Tabungan masuk"),array(""),array(number_format($msk->jumlah_nabung,0,",",".")),array(number_format($saldo,0,",","."))),4);}else{$pdf->Row_noborder(array(array($urut."."),array(substr($row->waktu,0,10)),array("Pengambilan tabungan"),array(number_format($klr->jumlah_ambil,0,",",".")),array(""),array(number_format($saldo,0,",","."))),4);}}echo $pdf->Output($file,"I"); ?>