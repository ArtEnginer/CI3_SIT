 <?php class Model_siswa extends CI_Model{public function tampil(){$this->db->where(['level'=>'siswa']);$this->db->select('*, tb_jurusan.jurusan, tb_kelas.kelas');$this->db->join('tb_jurusan','tb_jurusan.id_jurusan = tb_users.id_jurusan','left');$this->db->join('tb_kelas','tb_kelas.id_kelas = tb_users.id_kelas','left');return $this->db->get('tb_users')->result();}public function carisiswa($p){$this->db->select('*, tb_jurusan.jurusan, tb_kelas.kelas');$this->db->from('tb_users');$this->db->where(['level'=>'siswa']);$this->db->join('tb_jurusan','tb_jurusan.id_jurusan = tb_users.id_jurusan','left');$this->db->join('tb_kelas','tb_kelas.id_kelas = tb_users.id_kelas','left');$this->db->like('nama',$p);$this->db->or_like('jk',$p);$this->db->or_like('norek',$p);$this->db->or_like('telepon',$p);return $this->db->get()->result();}public function savesiswa(){$data=['nama'=>$this->input->post('nama'),'telepon'=>$this->input->post('telepon'),'jk'=>$this->input->post('jk'),'alamat'=>$this->input->post('alamat'),'id_jurusan'=>$this->input->post('id_jurusan'),'id_kelas'=>$this->input->post('id_kelas')];$this->db->insert('tb_users',$data);$this->session->set_flashdata('pesan','<div class="alert alert-success">Berhasil Menambah Data.!</div>');redirect('siswa/index','refresh');}public function tampileditsiswa($where){$this->db->where($where);return $this->db->get('tb_users',$where)->result();}public function updatesiswa($where){$data=array('nama'=>$this->input->post('nama_siswa'),'telepon'=>$this->input->post('telepon'),'jk'=>$this->input->post('jk'),'alamat'=>$this->input->post('alamat'),'id_jurusan'=>$this->input->post('id_jurusan'),'norek'=>$this->input->post('norek'),'id_kelas'=>$this->input->post('id_kelas'));$this->db->where($where);$this->db->update('tb_users',$data);$this->session->set_flashdata('pesan','<div class="alert alert-success">Berhasil Perbarui Data.!</div>');redirect('siswa/index','refresh');}public function tampildetails($where){$this->db->select('*, tb_jurusan.jurusan, tb_kelas.kelas');$this->db->join('tb_jurusan','tb_jurusan.id_jurusan = tb_users.id_jurusan','left');$this->db->join('tb_kelas','tb_kelas.id_kelas = tb_users.id_kelas','left');$this->db->where('tb_users.id_siswa',$where);$query=$this->db->get()->result();return $query;}}